@startuml
'https://plantuml.com/class-diagram

package controller {
    class PlayerController {
        -player : IPlayer
        -command : Command
        +PlayerController(IDisplay, IWorld) : void
        +setCommand(Command) : void
        -bindListeners(IDisplay) : void

        -Flap() : void
        -MoveLeft() : void
        -MoveRight() : void
    }

}

package Assets {

}


package view {

    interface IDisplay {}

    class PlayView {
        - jframe : JFrame
        - canvas : Canvas
    }

    class MenuView {
        - jframe : JFrame
        - canvas : Canvas
    }

    abstract IDisplay {
        - jFrame : JFrame
        - canvas : Canvas
    }

}



package Observers {

    interface ActionListener {
        + actionPerformed(KeyEvent) : void
    }

    interface KeyListener {
        +button_a(KeyEvent) : void
        +button_b(keyEvent) : void
        +button_left(KeyEvent) : void
        +button_right(KeyEvent) : void
    }


}

package BalloonBattleApp {
    abstract GameLoop {
        +controller : PlayerController
        +player : Player1
        +Enemies : List<Enemy>
        +run() : void
        +stop() : void
        +isRunning() : boolean
        #bindInputObservers() : void
        #bindWorldObservers() : void

        #renderFrame() : void
    }
}

package model {
    class Balloon {
        -isPopped : boolean

    }

    package player {
        class InAirState {
            -player : Player
            +InAirState(Player)
            +onEnterState() : void
            +Flap() : void
            +MoveLeft() : void
            +MoveRight() : void

        }

        class OnGroundState {
            -player : Player
            +OnGroundState(Player)
            +onEnterState() : void
            +Flap() : void
            +MoveLeft() : void
            +MoveRight() : void
        }

        interface PlayerState {
            +Flap() : void
            +MoveLeft() : void
            +MoveRight() : void

            +onEnterState() : void
        }

        class Player {
            -state : State
            +Player()
            +changeStateTo(State) : void
            +Flap() : void
            +MoveLeft() : void
            +MoveRight() : void
        }

    }


    class Player1 {
        -state : PlayerState
    }

    package enemies {

        abstract Enemy {}

        class HostileEntity {}


    }

    interface IMovable {
        -moveLeft() : void
        -moveRight() : void
        -flap() : void
    }

    Player ...> IMovable

    abstract Entity {
        - state : State

    }

    enum Direction {
        LEFT
        RIGHT
    }


    interface Command {
        +execute() : void
    }

    class Flap{
        -p : Player
        +execute() : void
    }

    class MoveLeft {
        -p : Player
        +execute() : void
    }

    class MoveRight {
        -p : Player
        +execute() : void
    }




    enum GameState {
        MENU
        GAME
        WON
        LOST
    }

    package levels {
        class Level {
        + render() : void
        + getPlatforms : ArrayList<Platform>
        + isPlayerOnPlatform() : boolean
        + setPlayerOnPlatform(boolean) : void
        + tick() : void
        }
            class Platform {}
    }

    abstract Item {
        # x : int
        # y : int
        # width : int
        # height : int
        # hitbox : Rectangle
        {abstract} + tick() : void
        {abstract} + render(Graphics) : void
    }

    class Game {
        - levels : List<Level>
        - player : Player
        - enemies : List<Enemy>
    }

    class CollisionDetection {

    }
}


BalloonBattleApp ---> PlayerController
BalloonBattleApp ---> Player1
BalloonBattleApp ---> Enemy

PlayerController ...> Player
PlayerController ...> Command

Entity --+ Direction

Flap ..|> Command
MoveLeft ..|> Command
MoveRight ..|> Command

Player1 ---> PlayerState

InAirState ---> Player
OnGroundState ---> Player

Player *--> Balloon
Player --|> CollisionDetection
HostileEntity --|> CollisionDetection

Enemy *--> Balloon


Player ---> Entity
PlayerState <-- Player

KeyListener <--- Player

PlayerState <... InAirState
PlayerState <... OnGroundState

Enemy --> HostileEntity
HostileEntity ---> Entity



@enduml